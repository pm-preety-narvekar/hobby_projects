<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Rudved's Minecraft Birthday Quest</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#87CEEB;
  touch-action:none;
  font-family:'Press Start 2P', cursive;
}

/* ALWAYS VISIBLE TITLE */
#gameTitle{
  position:fixed;
  top:0;
  width:100%;
  background:#000;
  color:#00ffcc;
  text-align:center;
  padding:12px;
  font-size:14px;
  z-index:60;
}

#instructions{
  position:fixed;
  top:48px;
  width:100%;
  background:rgba(0,0,0,0.85);
  color:white;
  text-align:center;
  padding:8px;
  font-size:11px;
  z-index:50;
}

#inviteScreen{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.95);
  color:white;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  z-index:100;
}

.button{
  margin-top:20px;
  padding:15px;
  background:#00AAFF;
  border:none;
  color:white;
  font-family:'Press Start 2P';
}
</style>
</head>
<body>

<div id="gameTitle">üéÆ RUDVED'S MINECRAFT BIRTHDAY QUEST üéÆ</div>

<div id="instructions">
üéÇ Tap All 5 Cakes! | Pinch / Scroll to Zoom | Cakes Left: <span id="cakeCount">5</span>
</div>

<div id="inviteScreen">
<h2>üéâ You're Invited üéâ</h2>
<h1>Rudved's 8th Birthday!</h1>
<p>
üóì Saturday, 7th March<br><br>
‚è∞ 11:00 AM<br><br>
üéÆ Minecraft Fun Party
</p>
<button class="button" onclick="location.reload()">PLAY AGAIN</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let scene=new THREE.Scene();
scene.background=new THREE.Color(0x87CEEB);

let renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
renderer.shadowMap.enabled=true;
document.body.appendChild(renderer.domElement);

let camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,0.1,1000);
camera.position.set(0,30,55);
camera.lookAt(0,0,0);

window.addEventListener("resize",()=>{
camera.aspect=window.innerWidth/window.innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(window.innerWidth,window.innerHeight);
});

/* LIGHTING */

scene.add(new THREE.AmbientLight(0xffffff,0.6));

let sun=new THREE.DirectionalLight(0xffffff,1);
sun.position.set(50,80,40);
sun.castShadow=true;
scene.add(sun);

/* TERRAIN */

let grass=new THREE.MeshLambertMaterial({color:"#2ecc40"});
let dirt=new THREE.MeshLambertMaterial({color:"#5a3d1e"});

let ground=new THREE.Mesh(
new THREE.BoxGeometry(120,8,120),
[dirt,dirt,grass,dirt,dirt,dirt]
);
ground.position.y=-4;
ground.receiveShadow=true;
scene.add(ground);

/* MINECRAFT TREES */

function createTree(x,z){
let trunk=new THREE.Mesh(
new THREE.BoxGeometry(2,6,2),
new THREE.MeshLambertMaterial({color:"#8B4513"})
);
trunk.position.set(x,3,z);
trunk.castShadow=true;
scene.add(trunk);

// Layered leaves
for(let y=0;y<3;y++){
for(let i=-1;i<=1;i++){
for(let j=-1;j<=1;j++){
if(Math.random()>0.2){
let leaf=new THREE.Mesh(
new THREE.BoxGeometry(3,3,3),
new THREE.MeshLambertMaterial({color:"#1e8c2f"})
);
leaf.position.set(x+i*3,8+y*3,z+j*3);
leaf.castShadow=true;
scene.add(leaf);
}
}
}
}
}

for(let i=0;i<10;i++){
createTree((Math.random()-0.5)*90,(Math.random()-0.5)*90);
}

/* MINECRAFT CLOUDS */

let clouds=[];

function createCloud(x,z){
let group=new THREE.Group();

let shape=[
[0,0],[6,0],[12,0],[6,3],[9,3]
];

shape.forEach(p=>{
let block=new THREE.Mesh(
new THREE.BoxGeometry(6,2,6),
new THREE.MeshLambertMaterial({color:0xffffff})
);
block.position.set(p[0],0,p[1]);
group.add(block);
});

group.position.set(x,45,z);
scene.add(group);
clouds.push(group);
}

for(let i=0;i<5;i++){
createCloud((Math.random()-0.5)*120,(Math.random()-0.5)*120);
}

/* MINECRAFT CAKES */

let cakes=[];
let offsets=[];

function createCake(x,z){
let group=new THREE.Group();

let base=new THREE.Mesh(
new THREE.BoxGeometry(4,2,4),
new THREE.MeshLambertMaterial({color:"#c68642"})
);
base.position.y=1;
group.add(base);

let icing=new THREE.Mesh(
new THREE.BoxGeometry(4.2,1,4.2),
new THREE.MeshLambertMaterial({color:"#ffffff"})
);
icing.position.y=2.5;
group.add(icing);

for(let i=0;i<5;i++){
let cherry=new THREE.Mesh(
new THREE.BoxGeometry(0.6,0.6,0.6),
new THREE.MeshLambertMaterial({color:"#cc0000"})
);
cherry.position.set((Math.random()-0.5)*2.5,3,(Math.random()-0.5)*2.5);
group.add(cherry);
}

group.position.set(x,0,z);
scene.add(group);
cakes.push(group);
offsets.push(Math.random()*Math.PI*2);
}

for(let i=0;i<5;i++){
createCake((Math.random()-0.5)*60,(Math.random()-0.5)*60);
}

/* PORTAL */

let portal=new THREE.Mesh(
new THREE.TorusGeometry(6,1,16,100),
new THREE.MeshBasicMaterial({color:0x00ffff})
);
portal.rotation.x=Math.PI/2;
portal.position.set(0,6,-50);
portal.visible=false;
scene.add(portal);

/* MUSIC */

let bgMusic=new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_6fbb7e3c2c.mp3?filename=8-bit-arcade-110630.mp3");
bgMusic.loop=true;
bgMusic.volume=0.5;

let winSound=new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_115b9b7c0b.mp3?filename=success-1-6297.mp3");

/* TAP */

let raycaster=new THREE.Raycaster();
let mouse=new THREE.Vector2();
let gameWon=false;

function handleTap(e){
if(bgMusic.paused) bgMusic.play();
if(gameWon)return;

let rect=renderer.domElement.getBoundingClientRect();
let x=((e.touches?e.touches[0].clientX:e.clientX)-rect.left)/rect.width;
let y=((e.touches?e.touches[0].clientY:e.clientY)-rect.top)/rect.height;

mouse.x=x*2-1;
mouse.y=-(y*2-1);

raycaster.setFromCamera(mouse,camera);
let intersects=raycaster.intersectObjects(scene.children,true);

if(intersects.length>0){
let obj=intersects[0].object;

while(obj.parent && !cakes.includes(obj)){
obj=obj.parent;
}

if(cakes.includes(obj)){
scene.remove(obj);
cakes=cakes.filter(c=>c!==obj);
document.getElementById("cakeCount").innerText=cakes.length;

if(cakes.length===0){
portal.visible=true;
document.getElementById("instructions").innerHTML="‚ú® Tap the Portal!";
}
}
else if(intersects[0].object===portal && portal.visible){
gameWon=true;
winSound.play();
document.getElementById("inviteScreen").style.display="flex";
}
}
}

window.addEventListener("click",handleTap);
window.addEventListener("touchstart",handleTap);

/* ANIMATION */

function animate(){
requestAnimationFrame(animate);

cakes.forEach((cake,i)=>{
offsets[i]+=0.03;
cake.position.y=Math.sin(offsets[i])*1;
});

clouds.forEach(c=>{
c.position.x+=0.07;
if(c.position.x>100)c.position.x=-100;
});

if(portal.visible){
portal.scale.setScalar(1+Math.sin(Date.now()*0.004)*0.2);
}

renderer.render(scene,camera);
}
animate();

</script>
</body>
</html>