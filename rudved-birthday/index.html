<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Rudved's Minecraft Birthday Quest</title>

<!-- Minecraft Pixel Font -->
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#87CEEB;
  touch-action:none;
  font-family:'Press Start 2P', cursive;
}

#instructions{
  position:fixed;
  top:0;
  width:100%;
  background:rgba(0,0,0,0.75);
  color:#fff;
  text-align:center;
  padding:10px;
  font-size:12px;
  z-index:50;
}

#inviteScreen{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.95);
  color:white;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  z-index:100;
}

#inviteScreen h1{color:#00FFAA;}
.button{
  margin-top:20px;
  padding:15px;
  background:#00AAFF;
  border:none;
  color:white;
  font-family:'Press Start 2P';
}
</style>
</head>
<body>

<div id="instructions">
üéÇ Tap all 5 Cakes! | Cakes Left: <span id="cakeCount">5</span>
</div>

<div id="inviteScreen">
<h1>üéâ You Found the Portal! üéâ</h1>
<h2>You're Invited to</h2>
<h1>Rudved's 8th Birthday!</h1>
<p>
üóì Saturday, 7th March<br><br>
‚è∞ 11:00 AM<br><br>
üéÆ Minecraft Fun Party
</p>
<button class="button" onclick="location.reload()">PLAY AGAIN</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let scene=new THREE.Scene();
scene.background=new THREE.Color(0x87CEEB);

let camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
let renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth,window.innerHeight);
document.body.appendChild(renderer.domElement);

window.addEventListener("resize",()=>{
camera.aspect=window.innerWidth/window.innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(window.innerWidth,window.innerHeight);
});

// LIGHT
let light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(10,20,10);
scene.add(light);

// GROUND
let ground=new THREE.Mesh(
new THREE.BoxGeometry(60,1,60),
new THREE.MeshLambertMaterial({color:0x3CB043})
);
ground.position.y=-0.5;
scene.add(ground);

// FLOATING TEXT (RUDVED)
let loader=new THREE.FontLoader();
loader.load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",font=>{
let textGeo=new THREE.TextGeometry("RUDVED",{
font:font,size:2.2,height:0.4
});
let textMat=new THREE.MeshBasicMaterial({color:0xFFD700});
let textMesh=new THREE.Mesh(textGeo,textMat);
textMesh.position.set(-6,8,-5);
scene.add(textMesh);
});

// CAKES
let cakes=[];
let cakeBobs=[];

for(let i=0;i<5;i++){
let cake=new THREE.Mesh(
new THREE.BoxGeometry(1.6,1.6,1.6),
new THREE.MeshLambertMaterial({color:0xFF1493})
);
cake.position.set((Math.random()-0.5)*25,1+Math.random()*2,(Math.random()-0.5)*25);
scene.add(cake);
cakes.push(cake);
cakeBobs.push(Math.random()*Math.PI*2);
}

// PORTAL
let portalMat=new THREE.MeshBasicMaterial({color:0x00FFFF});
let portal=new THREE.Mesh(
new THREE.TorusGeometry(2,0.3,16,100),
portalMat
);
portal.position.set(0,2,-18);
portal.rotation.x=Math.PI/2;
portal.visible=false;
scene.add(portal);

// TAP ME TEXT (above portal)
let tapText;
loader.load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",font=>{
let geo=new THREE.TextGeometry("TAP ME!",{
font:font,size:0.8,height:0.2
});
let mat=new THREE.MeshBasicMaterial({color:0xFFFFFF});
tapText=new THREE.Mesh(geo,mat);
tapText.position.set(-2.4,5,-18);
tapText.visible=false;
scene.add(tapText);
});

camera.position.set(0,10,25);
camera.lookAt(0,0,0);

let raycaster=new THREE.Raycaster();
let mouse=new THREE.Vector2();
let gameWon=false;

// BACKGROUND MUSIC + SOUNDS
let bgMusic=new Audio("https://cdn.pixabay.com/download/audio/2022/02/23/audio_5d5e4d15df.mp3?filename=happy-kids-113356.mp3");
bgMusic.loop=true;

let winSound=new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_3f5a5d7d44.mp3?filename=success-fanfare-trumpets-6185.mp3");

// SPARKLES
let sparkles=[];
function spawnSparkles(pos){
for(let i=0;i<20;i++){
let s=new THREE.Mesh(
new THREE.SphereGeometry(0.15,8,8),
new THREE.MeshBasicMaterial({color:Math.random()*0xffffff})
);
s.position.copy(pos);
s.userData.vel=new THREE.Vector3(
(Math.random()-0.5)*0.3,
Math.random()*0.4,
(Math.random()-0.5)*0.3
);
scene.add(s);
sparkles.push(s);
}
}

// CONFETTI
let confetti=[];
function startConfetti(){
for(let i=0;i<200;i++){
let p=new THREE.Mesh(
new THREE.BoxGeometry(0.2,0.2,0.2),
new THREE.MeshBasicMaterial({color:Math.random()*0xffffff})
);
p.position.set((Math.random()-0.5)*20,12,(Math.random()-0.5)*20);
p.userData.speed=Math.random()*0.1+0.05;
scene.add(p);
confetti.push(p);
}
}

// TAP HANDLING
function handleTap(event){
if(bgMusic.paused){bgMusic.play();}

if(gameWon)return;

let rect=renderer.domElement.getBoundingClientRect();
let x=( (event.touches?event.touches[0].clientX:event.clientX)-rect.left)/rect.width;
let y=( (event.touches?event.touches[0].clientY:event.clientY)-rect.top)/rect.height;

mouse.x=x*2-1;
mouse.y=-((y*2)-1);

raycaster.setFromCamera(mouse,camera);
let hits=raycaster.intersectObjects([...cakes,portal]);

if(hits.length>0){
let obj=hits[0].object;

if(cakes.includes(obj)){
spawnSparkles(obj.position);
scene.remove(obj);
cakes=cakes.filter(c=>c!==obj);
document.getElementById("cakeCount").innerText=cakes.length;

if(cakes.length===0){
portal.visible=true;
tapText.visible=true;
document.getElementById("instructions").innerHTML="‚ú® Tap the Glowing Portal!";
}
}
else if(obj===portal && portal.visible){
gameWon=true;
startConfetti();
winSound.play();
document.getElementById("inviteScreen").style.display="flex";
}
}
}

window.addEventListener("click",handleTap);
window.addEventListener("touchstart",handleTap);

// ANIMATE
function animate(){
requestAnimationFrame(animate);

// Animate cakes (floating)
cakes.forEach((c,i)=>{
cakeBobs[i]+=0.03;
c.position.y=1 + Math.sin(cakeBobs[i])*0.7;
});

// Portal glow (pulsing)
if(portal.visible){
portal.scale.setScalar(1+Math.sin(Date.now()*0.004)*0.2);
tapText.position.y=5+Math.sin(Date.now()*0.004)*0.5;
}

sparkles.forEach((s,i)=>{
s.position.add(s.userData.vel);
s.userData.vel.y -= 0.01;
if(s.position.y<0){scene.remove(s);sparkles.splice(i,1);}
});

confetti.forEach(p=>{p.position.y-=p.userData.speed;});

renderer.render(scene,camera);
}
animate();
</script>

</body>
</html>