<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Rudved's 3D Minecraft Birthday Quest</title>

<style>
html, body {
  margin:0;
  padding:0;
  overflow:hidden;
  touch-action:none;
  background:#87CEEB;
  font-family:monospace;
}

#inviteScreen {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.95);
  color:white;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  z-index:100;
}

#inviteScreen h1 { font-size:36px; color:#00FFAA; }
#inviteScreen p { font-size:20px; }

.button {
  margin-top:20px;
  padding:15px 25px;
  font-size:18px;
  background:#00AAFF;
  border:none;
  color:white;
  border-radius:12px;
}

.touch-btn {
  position:fixed;
  width:80px;
  height:80px;
  background:rgba(0,0,0,0.6);
  color:white;
  font-size:40px;
  display:flex;
  justify-content:center;
  align-items:center;
  border-radius:20px;
  user-select:none;
}
</style>
</head>
<body>

<div id="inviteScreen">
  <h1>üéâ PORTAL UNLOCKED! üéâ</h1>
  <h2>You're Invited to</h2>
  <h1>Rudved's 8th Birthday!</h1>
  <p>
  üóì Saturday, 7th March<br>
  ‚è∞ 11:00 AM<br>
  üéÆ Minecraft Fun Party
  </p>
  <button class="button" onclick="location.reload()">Play Again</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let scene = new THREE.Scene();
scene.background = new THREE.Color(0x87CEEB);

let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// RESPONSIVE RESIZE
window.addEventListener("resize", ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

// LIGHT
let light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(10,20,10);
scene.add(light);

// GROUND
let ground = new THREE.Mesh(
  new THREE.BoxGeometry(50,1,50),
  new THREE.MeshLambertMaterial({color:0x3CB043})
);
ground.position.y = -0.5;
scene.add(ground);

// PLAYER
let player = new THREE.Mesh(
  new THREE.BoxGeometry(1,1,1),
  new THREE.MeshLambertMaterial({color:0x8B4513})
);
player.position.y = 0.5;
scene.add(player);

// CAMERA START
camera.position.set(0,8,10);
camera.lookAt(player.position);

// CAKES
let blocks=[];
for(let i=0;i<5;i++){
  let block=new THREE.Mesh(
    new THREE.BoxGeometry(1,1,1),
    new THREE.MeshLambertMaterial({color:0xFF69B4})
  );
  block.position.set(
    (Math.random()-0.5)*30,
    0.5,
    (Math.random()-0.5)*30
  );
  scene.add(block);
  blocks.push(block);
}

// PORTAL
let portalMat = new THREE.MeshBasicMaterial({color:0x00FFFF});
let portal=new THREE.Mesh(
  new THREE.BoxGeometry(2,3,0.5),
  portalMat
);
portal.position.set(15,1.5,15);
portal.visible=false;
scene.add(portal);

let moveState={up:false,down:false,left:false,right:false};
let speed=0.18;
let gameWon=false;

// TOUCH CONTROLS
function createBtn(symbol,left,bottom,dir){
  let btn=document.createElement("div");
  btn.className="touch-btn";
  btn.style.left=left+"px";
  btn.style.bottom=bottom+"px";
  btn.innerHTML=symbol;

  btn.addEventListener("touchstart", e=>{
    e.preventDefault();
    moveState[dir]=true;
  });

  btn.addEventListener("touchend", ()=>{
    moveState[dir]=false;
  });

  document.body.appendChild(btn);
}

createBtn("‚¨Ü",110,200,"up");
createBtn("‚¨á",110,90,"down");
createBtn("‚¨Ö",30,145,"left");
createBtn("‚û°",190,145,"right");

// SOUND (plays after user interaction)
let audio = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_3f5a5d7d44.mp3?filename=success-fanfare-trumpets-6185.mp3");

// CONFETTI
let confetti=[];
function startConfetti(){
  for(let i=0;i<200;i++){
    let piece=new THREE.Mesh(
      new THREE.BoxGeometry(0.2,0.2,0.2),
      new THREE.MeshBasicMaterial({color:Math.random()*0xffffff})
    );
    piece.position.set(
      (Math.random()-0.5)*15,
      12,
      (Math.random()-0.5)*15
    );
    piece.userData.speed=Math.random()*0.1+0.05;
    scene.add(piece);
    confetti.push(piece);
  }
}

// UPDATE LOOP
function update(){
  if(gameWon) return;

  if(moveState.up) player.position.z -= speed;
  if(moveState.down) player.position.z += speed;
  if(moveState.left) player.position.x -= speed;
  if(moveState.right) player.position.x += speed;

  // BOUNDARY LIMIT
  player.position.x=Math.max(-24,Math.min(24,player.position.x));
  player.position.z=Math.max(-24,Math.min(24,player.position.z));

  // SMOOTH CAMERA FOLLOW
  camera.position.x += (player.position.x - camera.position.x)*0.1;
  camera.position.z += ((player.position.z+10) - camera.position.z)*0.1;
  camera.lookAt(player.position);

  blocks=blocks.filter(block=>{
    if(player.position.distanceTo(block.position)<2){
      scene.remove(block);
      return false;
    }
    return true;
  });

  if(blocks.length===0){
    portal.visible=true;
    let glow=1+Math.sin(Date.now()*0.005)*0.25;
    portal.scale.set(glow,glow,1);
  }

  if(portal.visible && player.position.distanceTo(portal.position)<3){
    gameWon=true;
    startConfetti();
    audio.play();
    document.getElementById("inviteScreen").style.display="flex";
  }
}

function animate(){
  requestAnimationFrame(animate);
  update();

  confetti.forEach(p=>{
    p.position.y -= p.userData.speed;
  });

  renderer.render(scene,camera);
}
animate();
</script>

</body>
</html>